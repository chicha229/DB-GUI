CREATE OR ALTER PROCEDURE UI$FORM_CR (
    I_ID VARCHAR(30),
    I_EXCEPT_SYSTEM D_BOOLEAN)
RETURNS (
    ID VARCHAR(30),
    NAME VARCHAR(100),
    MAIN_PROCEDURE VARCHAR(30),
    MAIN_PROCEDURE_NAME VARCHAR(100),
    CUSTOM_CLASS VARCHAR(100),
    IS_MODAL SMALLINT)
AS
BEGIN
  FOR
    SELECT
      T.ID, L_1.NAME, L_1.CUSTOM_CLASS,
      L_1.IS_MODAL, T.MAIN_PROCEDURE, L_2.NAME MAIN_PROCEDURE_NAME
    FROM UI$FORM T
    JOIN UI$BLOCK L_1 ON L_1.ID = T.ID
    LEFT JOIN UI$BLOCK L_2 ON L_2.ID = T.MAIN_PROCEDURE
    WHERE
      (T.ID = :I_ID OR :I_ID IS NULL) AND
      (COALESCE(:I_EXCEPT_SYSTEM, 0) = 0 OR T.ID NOT LIKE 'UI$%') AND
      1=1
    ORDER BY T.ID
    INTO
      :ID, :NAME, :CUSTOM_CLASS,
      :IS_MODAL, :MAIN_PROCEDURE, :MAIN_PROCEDURE_NAME
  DO SUSPEND;
END