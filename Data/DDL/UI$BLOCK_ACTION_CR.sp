CREATE OR ALTER PROCEDURE UI$BLOCK_ACTION_CR (
    I_ID VARCHAR(30),
    I_BLOCK VARCHAR(30))
RETURNS (
    ID VARCHAR(30),
    "BLOCK" VARCHAR(30),
    CAPTION VARCHAR(100),
    LINKS_TO VARCHAR(30),
    ACTION_STYLE VARCHAR(30),
    IMAGE_INDEX INTEGER,
    ORDER_NUM SMALLINT,
    REFRESH_MODE VARCHAR(30),
    L_BLOCK_NAME VARCHAR(100),
    L_LINKS_TO_NAME VARCHAR(100),
    L_ACTION_STYLE_NAME VARCHAR(100),
    L_REFRESH_MODE_NAME VARCHAR(100))
AS
 BEGIN
  FOR
    SELECT T.ID,T.BLOCK,T.CAPTION,T.LINKS_TO,T.ACTION_STYLE,T.IMAGE_INDEX,T.ORDER_NUM,T.REFRESH_MODE,L1.NAME AS L_BLOCK_NAME,L2.NAME AS L_LINKS_TO_NAME,L3.NAME AS L_ACTION_STYLE_NAME,L4.NAME AS L_REFRESH_MODE_NAME
    FROM UI$BLOCK_ACTION T     
    LEFT JOIN UI$BLOCK L1 ON L1.ID=T.BLOCK
    LEFT JOIN UI$BLOCK L2 ON L2.ID=T.LINKS_TO
    LEFT JOIN UI$ACTION_STYLE L3 ON L3.ID=T.ACTION_STYLE
    LEFT JOIN UI$REFRESH_MODE L4 ON L4.ID=T.REFRESH_MODE
    WHERE
      (T.ID = :I_ID OR :I_ID IS NULL) AND
      (T.BLOCK = :I_BLOCK OR :I_BLOCK IS NULL) AND
      1=1
    INTO :ID,:BLOCK,:CAPTION,:LINKS_TO,:ACTION_STYLE,:IMAGE_INDEX,:ORDER_NUM,:REFRESH_MODE,:L_BLOCK_NAME,:L_LINKS_TO_NAME,:L_ACTION_STYLE_NAME,:L_REFRESH_MODE_NAME
  DO SUSPEND;
END